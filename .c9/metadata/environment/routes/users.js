{"changed":true,"filter":false,"title":"users.js","tooltip":"/routes/users.js","value":"const express = require(\"express\");\nconst router = express.Router();\nconst bcrypt = require('bcrypt');\nconst passport = require('passport');\n\n//User model\nconst User = require(\"/home/ubuntu/environment/models/User\");\n\n//Login Page\nrouter.get('/login' , (req, res) => res.render('login'));\n\n//Register Page\nrouter.get('/register' , (req, res) => res.render('register'));\n\n//script\nrouter.get('/script', (req, res) => res.render('script'));\n\n//Register Handle\nrouter.post('/register', (req, res) =>{\n   const {name, email, password, password2 } = req.body;\n   let errors = [];\n   \n   //Check required fields\n   if(!name || !email || !password || !password2){\n       errors.push({msg: 'Please fill in all fields'});\n   }\n   \n   //Check password match\n   if(password != password2){\n       errors.push({msg: 'Passwords do not match'});\n   }\n   \n   //Check pass length\n   if(password.length < 6){\n       errors.push({msg: 'Password should be at least 6 characters' });\n   }\n   \n   if(errors.length > 0){\n       res.render('register',{\n           errors,\n           name,\n           email,\n           password,\n           password2\n       });\n   }else{\n       // validation passed\n       User.findOne({email: email})\n       .then(user => {\n           if(user){\n               //User exists\n               errors.push({msg: 'Email is already registered'});\n               res.render('register',{\n           errors,\n           name,\n           email,\n           password,\n           password2\n       });\n           } else{\n               const newUser = new User({\n                   name,\n                   email,\n                   password\n               });\n               \n              //HashPassword\n       bcrypt.genSalt(10, (err, salt) => {\n          bcrypt.hash(newUser.password, salt, (err, hash) => {\n            if (err) throw err;\n            newUser.password = hash;\n            newUser\n              .save()\n              .then(user => {\n                req.flash(\n                  'success_msg',\n                  'You are now registered and can log in'\n                );\n                res.redirect('/users/login');\n              })\n              .catch(err => console.log(err));\n          });\n        });\n      }\n    });\n  }\n});\n\n//Login handle\nrouter.post('/login', (req, res, next) =>{\n   passport.authenticate('local', {\n    successRedirect: '/dashbord',\n    failureRedirect: '/users/login',\n    failureFlash: true\n  })(req, res, next);\n});\n\n// Logout\nrouter.get('/logout', (req, res) => {\n  req.logout();\n  req.flash('success_msg', 'You are logged out');\n  res.redirect('/users/login');\n});\n\nmodule.exports = router;","undoManager":{"mark":94,"position":100,"stack":[[{"start":{"row":3,"column":17},"end":{"row":3,"column":24},"action":"remove","lines":["require"],"id":584},{"start":{"row":3,"column":17},"end":{"row":3,"column":24},"action":"insert","lines":["require"]}],[{"start":{"row":3,"column":24},"end":{"row":3,"column":26},"action":"insert","lines":["()"],"id":585}],[{"start":{"row":3,"column":26},"end":{"row":3,"column":27},"action":"insert","lines":[";"],"id":586}],[{"start":{"row":3,"column":25},"end":{"row":3,"column":27},"action":"insert","lines":["''"],"id":587}],[{"start":{"row":3,"column":26},"end":{"row":3,"column":27},"action":"insert","lines":["p"],"id":588},{"start":{"row":3,"column":27},"end":{"row":3,"column":28},"action":"insert","lines":["a"]},{"start":{"row":3,"column":28},"end":{"row":3,"column":29},"action":"insert","lines":["s"]},{"start":{"row":3,"column":29},"end":{"row":3,"column":30},"action":"insert","lines":["s"]},{"start":{"row":3,"column":30},"end":{"row":3,"column":31},"action":"insert","lines":["p"]},{"start":{"row":3,"column":31},"end":{"row":3,"column":32},"action":"insert","lines":["o"]},{"start":{"row":3,"column":32},"end":{"row":3,"column":33},"action":"insert","lines":["r"]},{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"insert","lines":["t"]}],[{"start":{"row":85,"column":20},"end":{"row":85,"column":21},"action":"insert","lines":[","],"id":589}],[{"start":{"row":85,"column":21},"end":{"row":85,"column":22},"action":"insert","lines":[" "],"id":590}],[{"start":{"row":85,"column":22},"end":{"row":85,"column":24},"action":"insert","lines":["()"],"id":591}],[{"start":{"row":85,"column":23},"end":{"row":85,"column":24},"action":"insert","lines":["r"],"id":592},{"start":{"row":85,"column":24},"end":{"row":85,"column":25},"action":"insert","lines":["e"]},{"start":{"row":85,"column":25},"end":{"row":85,"column":26},"action":"insert","lines":["s"]},{"start":{"row":85,"column":26},"end":{"row":85,"column":27},"action":"insert","lines":[","]}],[{"start":{"row":85,"column":27},"end":{"row":85,"column":28},"action":"insert","lines":[" "],"id":593},{"start":{"row":85,"column":28},"end":{"row":85,"column":29},"action":"insert","lines":["r"]},{"start":{"row":85,"column":29},"end":{"row":85,"column":30},"action":"insert","lines":["e"]},{"start":{"row":85,"column":30},"end":{"row":85,"column":31},"action":"insert","lines":["q"]}],[{"start":{"row":85,"column":32},"end":{"row":85,"column":33},"action":"insert","lines":[" "],"id":594},{"start":{"row":85,"column":33},"end":{"row":85,"column":34},"action":"insert","lines":["="]},{"start":{"row":85,"column":34},"end":{"row":85,"column":35},"action":"insert","lines":[">"]}],[{"start":{"row":85,"column":35},"end":{"row":85,"column":37},"action":"insert","lines":["{}"],"id":595}],[{"start":{"row":85,"column":36},"end":{"row":87,"column":0},"action":"insert","lines":["","   ",""],"id":596}],[{"start":{"row":87,"column":2},"end":{"row":87,"column":3},"action":"insert","lines":[";"],"id":597}],[{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"remove","lines":[")"],"id":598}],[{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":[";"],"id":599}],[{"start":{"row":64,"column":47},"end":{"row":64,"column":48},"action":"insert","lines":[" "],"id":600},{"start":{"row":64,"column":48},"end":{"row":64,"column":49},"action":"insert","lines":["{"]}],[{"start":{"row":78,"column":12},"end":{"row":78,"column":13},"action":"insert","lines":[")"],"id":601},{"start":{"row":78,"column":13},"end":{"row":78,"column":14},"action":"insert","lines":[";"]}],[{"start":{"row":78,"column":14},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":602},{"start":{"row":79,"column":0},"end":{"row":79,"column":11},"action":"insert","lines":["           "]},{"start":{"row":79,"column":11},"end":{"row":79,"column":12},"action":"insert","lines":["}"]}],[{"start":{"row":79,"column":10},"end":{"row":79,"column":11},"action":"remove","lines":[" "],"id":603},{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"remove","lines":[" "]}],[{"start":{"row":64,"column":47},"end":{"row":64,"column":49},"action":"remove","lines":[" {"],"id":604},{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"remove","lines":[";"]},{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":[")"]},{"start":{"row":78,"column":2},"end":{"row":79,"column":0},"action":"remove","lines":["         });",""]}],[{"start":{"row":64,"column":47},"end":{"row":64,"column":48},"action":"insert","lines":["{"],"id":605}],[{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"remove","lines":[")"],"id":606}],[{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":[";"],"id":607}],[{"start":{"row":77,"column":14},"end":{"row":77,"column":15},"action":"insert","lines":["}"],"id":608},{"start":{"row":77,"column":15},"end":{"row":77,"column":16},"action":"insert","lines":[")"]},{"start":{"row":77,"column":16},"end":{"row":77,"column":17},"action":"insert","lines":[";"]}],[{"start":{"row":77,"column":13},"end":{"row":77,"column":14},"action":"remove","lines":[" "],"id":609},{"start":{"row":77,"column":12},"end":{"row":77,"column":13},"action":"remove","lines":[" "]}],[{"start":{"row":86,"column":3},"end":{"row":86,"column":4},"action":"insert","lines":["p"],"id":610},{"start":{"row":86,"column":4},"end":{"row":86,"column":5},"action":"insert","lines":["a"]},{"start":{"row":86,"column":5},"end":{"row":86,"column":6},"action":"insert","lines":["s"]},{"start":{"row":86,"column":6},"end":{"row":86,"column":7},"action":"insert","lines":["s"]}],[{"start":{"row":86,"column":3},"end":{"row":86,"column":7},"action":"remove","lines":["pass"],"id":611},{"start":{"row":86,"column":3},"end":{"row":86,"column":11},"action":"insert","lines":["passport"]}],[{"start":{"row":86,"column":11},"end":{"row":86,"column":12},"action":"insert","lines":["."],"id":612}],[{"start":{"row":86,"column":12},"end":{"row":86,"column":13},"action":"insert","lines":["a"],"id":613},{"start":{"row":86,"column":13},"end":{"row":86,"column":14},"action":"insert","lines":["u"]}],[{"start":{"row":86,"column":13},"end":{"row":86,"column":14},"action":"remove","lines":["u"],"id":614},{"start":{"row":86,"column":12},"end":{"row":86,"column":13},"action":"remove","lines":["a"]},{"start":{"row":86,"column":11},"end":{"row":86,"column":12},"action":"remove","lines":["."]},{"start":{"row":86,"column":10},"end":{"row":86,"column":11},"action":"remove","lines":["t"]},{"start":{"row":86,"column":9},"end":{"row":86,"column":10},"action":"remove","lines":["r"]},{"start":{"row":86,"column":8},"end":{"row":86,"column":9},"action":"remove","lines":["o"]},{"start":{"row":86,"column":7},"end":{"row":86,"column":8},"action":"remove","lines":["p"]},{"start":{"row":86,"column":6},"end":{"row":86,"column":7},"action":"remove","lines":["s"]},{"start":{"row":86,"column":5},"end":{"row":86,"column":6},"action":"remove","lines":["s"]},{"start":{"row":86,"column":4},"end":{"row":86,"column":5},"action":"remove","lines":["a"]},{"start":{"row":86,"column":3},"end":{"row":86,"column":4},"action":"remove","lines":["p"]}],[{"start":{"row":86,"column":3},"end":{"row":90,"column":21},"action":"insert","lines":["passport.authenticate('local', {","    successRedirect: '/dashboard',","    failureRedirect: '/users/login',","    failureFlash: true","  })(req, res, next);"],"id":615}],[{"start":{"row":85,"column":31},"end":{"row":85,"column":32},"action":"insert","lines":[","],"id":616}],[{"start":{"row":85,"column":32},"end":{"row":85,"column":33},"action":"insert","lines":[" "],"id":617},{"start":{"row":85,"column":33},"end":{"row":85,"column":34},"action":"insert","lines":["n"]},{"start":{"row":85,"column":34},"end":{"row":85,"column":35},"action":"insert","lines":["e"]},{"start":{"row":85,"column":35},"end":{"row":85,"column":36},"action":"insert","lines":["x"]},{"start":{"row":85,"column":36},"end":{"row":85,"column":37},"action":"insert","lines":["t"]}],[{"start":{"row":87,"column":22},"end":{"row":87,"column":46},"action":"insert","lines":["/home/ubuntu/environment"],"id":618}],[{"start":{"row":87,"column":47},"end":{"row":87,"column":48},"action":"insert","lines":["v"],"id":619},{"start":{"row":87,"column":48},"end":{"row":87,"column":49},"action":"insert","lines":["i"]},{"start":{"row":87,"column":49},"end":{"row":87,"column":50},"action":"insert","lines":["e"]},{"start":{"row":87,"column":50},"end":{"row":87,"column":51},"action":"insert","lines":["w"]},{"start":{"row":87,"column":51},"end":{"row":87,"column":52},"action":"insert","lines":["s"]}],[{"start":{"row":87,"column":52},"end":{"row":87,"column":53},"action":"insert","lines":["/"],"id":620}],[{"start":{"row":72,"column":22},"end":{"row":72,"column":23},"action":"insert","lines":["/"],"id":621},{"start":{"row":72,"column":23},"end":{"row":72,"column":24},"action":"insert","lines":["/"]}],[{"start":{"row":72,"column":23},"end":{"row":72,"column":24},"action":"remove","lines":["/"],"id":622},{"start":{"row":72,"column":22},"end":{"row":72,"column":23},"action":"remove","lines":["/"]}],[{"start":{"row":72,"column":22},"end":{"row":72,"column":23},"action":"insert","lines":["/"],"id":623},{"start":{"row":72,"column":23},"end":{"row":72,"column":24},"action":"insert","lines":["/"]}],[{"start":{"row":72,"column":23},"end":{"row":72,"column":24},"action":"remove","lines":["/"],"id":624},{"start":{"row":72,"column":22},"end":{"row":72,"column":23},"action":"remove","lines":["/"]}],[{"start":{"row":64,"column":5},"end":{"row":82,"column":3},"action":"remove","lines":["         bcrypt.genSalt(10, (err, salt) =>{","              bcrypt.hash(newUser.password, salt, (err, hash) =>{","                  if(err) throw err;","                  //set password to hashed","                  newUser.password = hash;","                  //save user","                  newUser.save()","                  .then(user => {","                      req.flash('succes_msg','You are now registered and can log in');","                      res.redirect('/users/login');","                  })","                  .catch(err => console.log(err));","              });","            });","           }","       });","   }","   ","});"],"id":625}],[{"start":{"row":64,"column":5},"end":{"row":83,"column":3},"action":"insert","lines":["  bcrypt.genSalt(10, (err, salt) => {","          bcrypt.hash(newUser.password, salt, (err, hash) => {","            if (err) throw err;","            newUser.password = hash;","            newUser","              .save()","              .then(user => {","                req.flash(","                  'success_msg',","                  'You are now registered and can log in'","                );","                res.redirect('/users/login');","              })","              .catch(err => console.log(err));","          });","        });","      }","    });","  }","});"],"id":626}],[{"start":{"row":88,"column":52},"end":{"row":88,"column":53},"action":"remove","lines":["/"],"id":627},{"start":{"row":88,"column":51},"end":{"row":88,"column":52},"action":"remove","lines":["s"]},{"start":{"row":88,"column":50},"end":{"row":88,"column":51},"action":"remove","lines":["w"]},{"start":{"row":88,"column":49},"end":{"row":88,"column":50},"action":"remove","lines":["e"]},{"start":{"row":88,"column":48},"end":{"row":88,"column":49},"action":"remove","lines":["i"]},{"start":{"row":88,"column":47},"end":{"row":88,"column":48},"action":"remove","lines":["v"]},{"start":{"row":88,"column":46},"end":{"row":88,"column":47},"action":"remove","lines":["/"]},{"start":{"row":88,"column":45},"end":{"row":88,"column":46},"action":"remove","lines":["t"]},{"start":{"row":88,"column":44},"end":{"row":88,"column":45},"action":"remove","lines":["n"]},{"start":{"row":88,"column":43},"end":{"row":88,"column":44},"action":"remove","lines":["e"]},{"start":{"row":88,"column":42},"end":{"row":88,"column":43},"action":"remove","lines":["m"]},{"start":{"row":88,"column":41},"end":{"row":88,"column":42},"action":"remove","lines":["n"]},{"start":{"row":88,"column":40},"end":{"row":88,"column":41},"action":"remove","lines":["o"]},{"start":{"row":88,"column":39},"end":{"row":88,"column":40},"action":"remove","lines":["r"]},{"start":{"row":88,"column":38},"end":{"row":88,"column":39},"action":"remove","lines":["i"]},{"start":{"row":88,"column":37},"end":{"row":88,"column":38},"action":"remove","lines":["v"]},{"start":{"row":88,"column":36},"end":{"row":88,"column":37},"action":"remove","lines":["n"]},{"start":{"row":88,"column":35},"end":{"row":88,"column":36},"action":"remove","lines":["e"]},{"start":{"row":88,"column":34},"end":{"row":88,"column":35},"action":"remove","lines":["/"]}],[{"start":{"row":88,"column":33},"end":{"row":88,"column":34},"action":"remove","lines":["u"],"id":628},{"start":{"row":88,"column":32},"end":{"row":88,"column":33},"action":"remove","lines":["t"]},{"start":{"row":88,"column":31},"end":{"row":88,"column":32},"action":"remove","lines":["n"]},{"start":{"row":88,"column":30},"end":{"row":88,"column":31},"action":"remove","lines":["u"]},{"start":{"row":88,"column":29},"end":{"row":88,"column":30},"action":"remove","lines":["b"]},{"start":{"row":88,"column":28},"end":{"row":88,"column":29},"action":"remove","lines":["u"]},{"start":{"row":88,"column":27},"end":{"row":88,"column":28},"action":"remove","lines":["/"]},{"start":{"row":88,"column":26},"end":{"row":88,"column":27},"action":"remove","lines":["e"]},{"start":{"row":88,"column":25},"end":{"row":88,"column":26},"action":"remove","lines":["m"]},{"start":{"row":88,"column":24},"end":{"row":88,"column":25},"action":"remove","lines":["o"]},{"start":{"row":88,"column":23},"end":{"row":88,"column":24},"action":"remove","lines":["h"]}],[{"start":{"row":86,"column":25},"end":{"row":86,"column":26},"action":"remove","lines":["s"],"id":629}],[{"start":{"row":86,"column":25},"end":{"row":86,"column":26},"action":"insert","lines":["q"],"id":630}],[{"start":{"row":86,"column":30},"end":{"row":86,"column":31},"action":"remove","lines":["q"],"id":631}],[{"start":{"row":86,"column":30},"end":{"row":86,"column":31},"action":"insert","lines":["s"],"id":632}],[{"start":{"row":88,"column":22},"end":{"row":88,"column":46},"action":"insert","lines":["/home/ubuntu/environment"],"id":633}],[{"start":{"row":88,"column":45},"end":{"row":88,"column":46},"action":"remove","lines":["t"],"id":634},{"start":{"row":88,"column":44},"end":{"row":88,"column":45},"action":"remove","lines":["n"]},{"start":{"row":88,"column":43},"end":{"row":88,"column":44},"action":"remove","lines":["e"]},{"start":{"row":88,"column":42},"end":{"row":88,"column":43},"action":"remove","lines":["m"]},{"start":{"row":88,"column":41},"end":{"row":88,"column":42},"action":"remove","lines":["n"]},{"start":{"row":88,"column":40},"end":{"row":88,"column":41},"action":"remove","lines":["o"]},{"start":{"row":88,"column":39},"end":{"row":88,"column":40},"action":"remove","lines":["r"]},{"start":{"row":88,"column":38},"end":{"row":88,"column":39},"action":"remove","lines":["i"]},{"start":{"row":88,"column":37},"end":{"row":88,"column":38},"action":"remove","lines":["v"]},{"start":{"row":88,"column":36},"end":{"row":88,"column":37},"action":"remove","lines":["n"]},{"start":{"row":88,"column":35},"end":{"row":88,"column":36},"action":"remove","lines":["e"]},{"start":{"row":88,"column":34},"end":{"row":88,"column":35},"action":"remove","lines":["/"]},{"start":{"row":88,"column":33},"end":{"row":88,"column":34},"action":"remove","lines":["u"]},{"start":{"row":88,"column":32},"end":{"row":88,"column":33},"action":"remove","lines":["t"]},{"start":{"row":88,"column":31},"end":{"row":88,"column":32},"action":"remove","lines":["n"]},{"start":{"row":88,"column":30},"end":{"row":88,"column":31},"action":"remove","lines":["u"]},{"start":{"row":88,"column":29},"end":{"row":88,"column":30},"action":"remove","lines":["b"]},{"start":{"row":88,"column":28},"end":{"row":88,"column":29},"action":"remove","lines":["u"]},{"start":{"row":88,"column":27},"end":{"row":88,"column":28},"action":"remove","lines":["/"]}],[{"start":{"row":88,"column":26},"end":{"row":88,"column":27},"action":"remove","lines":["e"],"id":635},{"start":{"row":88,"column":25},"end":{"row":88,"column":26},"action":"remove","lines":["m"]},{"start":{"row":88,"column":24},"end":{"row":88,"column":25},"action":"remove","lines":["o"]},{"start":{"row":88,"column":23},"end":{"row":88,"column":24},"action":"remove","lines":["h"]},{"start":{"row":88,"column":22},"end":{"row":88,"column":23},"action":"remove","lines":["/"]}],[{"start":{"row":88,"column":22},"end":{"row":88,"column":46},"action":"insert","lines":["/home/ubuntu/environment"],"id":636}],[{"start":{"row":88,"column":46},"end":{"row":88,"column":47},"action":"insert","lines":["/"],"id":637},{"start":{"row":88,"column":47},"end":{"row":88,"column":48},"action":"insert","lines":["v"]},{"start":{"row":88,"column":48},"end":{"row":88,"column":49},"action":"insert","lines":["i"]},{"start":{"row":88,"column":49},"end":{"row":88,"column":50},"action":"insert","lines":["e"]},{"start":{"row":88,"column":50},"end":{"row":88,"column":51},"action":"insert","lines":["w"]}],[{"start":{"row":88,"column":51},"end":{"row":88,"column":52},"action":"insert","lines":["s"],"id":638}],[{"start":{"row":88,"column":51},"end":{"row":88,"column":52},"action":"remove","lines":["s"],"id":639},{"start":{"row":88,"column":50},"end":{"row":88,"column":51},"action":"remove","lines":["w"]},{"start":{"row":88,"column":49},"end":{"row":88,"column":50},"action":"remove","lines":["e"]},{"start":{"row":88,"column":48},"end":{"row":88,"column":49},"action":"remove","lines":["i"]},{"start":{"row":88,"column":47},"end":{"row":88,"column":48},"action":"remove","lines":["v"]},{"start":{"row":88,"column":46},"end":{"row":88,"column":47},"action":"remove","lines":["/"]},{"start":{"row":88,"column":45},"end":{"row":88,"column":46},"action":"remove","lines":["t"]},{"start":{"row":88,"column":44},"end":{"row":88,"column":45},"action":"remove","lines":["n"]},{"start":{"row":88,"column":43},"end":{"row":88,"column":44},"action":"remove","lines":["e"]},{"start":{"row":88,"column":42},"end":{"row":88,"column":43},"action":"remove","lines":["m"]},{"start":{"row":88,"column":41},"end":{"row":88,"column":42},"action":"remove","lines":["n"]},{"start":{"row":88,"column":40},"end":{"row":88,"column":41},"action":"remove","lines":["o"]},{"start":{"row":88,"column":39},"end":{"row":88,"column":40},"action":"remove","lines":["r"]},{"start":{"row":88,"column":38},"end":{"row":88,"column":39},"action":"remove","lines":["i"]},{"start":{"row":88,"column":37},"end":{"row":88,"column":38},"action":"remove","lines":["v"]},{"start":{"row":88,"column":36},"end":{"row":88,"column":37},"action":"remove","lines":["n"]},{"start":{"row":88,"column":35},"end":{"row":88,"column":36},"action":"remove","lines":["e"]},{"start":{"row":88,"column":34},"end":{"row":88,"column":35},"action":"remove","lines":["/"]},{"start":{"row":88,"column":33},"end":{"row":88,"column":34},"action":"remove","lines":["u"]}],[{"start":{"row":88,"column":32},"end":{"row":88,"column":33},"action":"remove","lines":["t"],"id":640},{"start":{"row":88,"column":31},"end":{"row":88,"column":32},"action":"remove","lines":["n"]},{"start":{"row":88,"column":30},"end":{"row":88,"column":31},"action":"remove","lines":["u"]},{"start":{"row":88,"column":29},"end":{"row":88,"column":30},"action":"remove","lines":["b"]},{"start":{"row":88,"column":28},"end":{"row":88,"column":29},"action":"remove","lines":["u"]},{"start":{"row":88,"column":27},"end":{"row":88,"column":28},"action":"remove","lines":["/"]},{"start":{"row":88,"column":26},"end":{"row":88,"column":27},"action":"remove","lines":["e"]},{"start":{"row":88,"column":25},"end":{"row":88,"column":26},"action":"remove","lines":["m"]},{"start":{"row":88,"column":24},"end":{"row":88,"column":25},"action":"remove","lines":["o"]},{"start":{"row":88,"column":23},"end":{"row":88,"column":24},"action":"remove","lines":["h"]},{"start":{"row":88,"column":22},"end":{"row":88,"column":23},"action":"remove","lines":["/"]}],[{"start":{"row":88,"column":29},"end":{"row":88,"column":30},"action":"remove","lines":["a"],"id":641}],[{"start":{"row":88,"column":22},"end":{"row":88,"column":46},"action":"insert","lines":["/home/ubuntu/environment"],"id":642}],[{"start":{"row":88,"column":46},"end":{"row":88,"column":47},"action":"insert","lines":["/"],"id":643}],[{"start":{"row":88,"column":47},"end":{"row":88,"column":48},"action":"insert","lines":["v"],"id":644},{"start":{"row":88,"column":48},"end":{"row":88,"column":49},"action":"insert","lines":["i"]},{"start":{"row":88,"column":49},"end":{"row":88,"column":50},"action":"insert","lines":["e"]},{"start":{"row":88,"column":50},"end":{"row":88,"column":51},"action":"insert","lines":["w"]},{"start":{"row":88,"column":51},"end":{"row":88,"column":52},"action":"insert","lines":["s"]}],[{"start":{"row":88,"column":51},"end":{"row":88,"column":52},"action":"remove","lines":["s"],"id":645},{"start":{"row":88,"column":50},"end":{"row":88,"column":51},"action":"remove","lines":["w"]},{"start":{"row":88,"column":49},"end":{"row":88,"column":50},"action":"remove","lines":["e"]},{"start":{"row":88,"column":48},"end":{"row":88,"column":49},"action":"remove","lines":["i"]},{"start":{"row":88,"column":47},"end":{"row":88,"column":48},"action":"remove","lines":["v"]},{"start":{"row":88,"column":46},"end":{"row":88,"column":47},"action":"remove","lines":["/"]},{"start":{"row":88,"column":45},"end":{"row":88,"column":46},"action":"remove","lines":["t"]},{"start":{"row":88,"column":44},"end":{"row":88,"column":45},"action":"remove","lines":["n"]},{"start":{"row":88,"column":43},"end":{"row":88,"column":44},"action":"remove","lines":["e"]},{"start":{"row":88,"column":42},"end":{"row":88,"column":43},"action":"remove","lines":["m"]},{"start":{"row":88,"column":41},"end":{"row":88,"column":42},"action":"remove","lines":["n"]},{"start":{"row":88,"column":40},"end":{"row":88,"column":41},"action":"remove","lines":["o"]},{"start":{"row":88,"column":39},"end":{"row":88,"column":40},"action":"remove","lines":["r"]},{"start":{"row":88,"column":38},"end":{"row":88,"column":39},"action":"remove","lines":["i"]},{"start":{"row":88,"column":37},"end":{"row":88,"column":38},"action":"remove","lines":["v"]},{"start":{"row":88,"column":36},"end":{"row":88,"column":37},"action":"remove","lines":["n"]},{"start":{"row":88,"column":35},"end":{"row":88,"column":36},"action":"remove","lines":["e"]},{"start":{"row":88,"column":34},"end":{"row":88,"column":35},"action":"remove","lines":["/"]},{"start":{"row":88,"column":33},"end":{"row":88,"column":34},"action":"remove","lines":["u"]}],[{"start":{"row":88,"column":32},"end":{"row":88,"column":33},"action":"remove","lines":["t"],"id":646},{"start":{"row":88,"column":31},"end":{"row":88,"column":32},"action":"remove","lines":["n"]},{"start":{"row":88,"column":30},"end":{"row":88,"column":31},"action":"remove","lines":["u"]},{"start":{"row":88,"column":29},"end":{"row":88,"column":30},"action":"remove","lines":["b"]},{"start":{"row":88,"column":28},"end":{"row":88,"column":29},"action":"remove","lines":["u"]},{"start":{"row":88,"column":27},"end":{"row":88,"column":28},"action":"remove","lines":["/"]},{"start":{"row":88,"column":26},"end":{"row":88,"column":27},"action":"remove","lines":["e"]},{"start":{"row":88,"column":25},"end":{"row":88,"column":26},"action":"remove","lines":["m"]},{"start":{"row":88,"column":24},"end":{"row":88,"column":25},"action":"remove","lines":["o"]},{"start":{"row":88,"column":23},"end":{"row":88,"column":24},"action":"remove","lines":["h"]},{"start":{"row":88,"column":22},"end":{"row":88,"column":23},"action":"remove","lines":["/"]}],[{"start":{"row":92,"column":3},"end":{"row":93,"column":0},"action":"insert","lines":["",""],"id":647},{"start":{"row":93,"column":0},"end":{"row":94,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":94,"column":0},"end":{"row":99,"column":3},"action":"insert","lines":["// Logout","router.get('/logout', (req, res) => {","  req.logout();","  req.flash('success_msg', 'You are logged out');","  res.redirect('/users/login');","});"],"id":648}],[{"start":{"row":12,"column":63},"end":{"row":13,"column":0},"action":"insert","lines":["",""],"id":649},{"start":{"row":13,"column":0},"end":{"row":14,"column":0},"action":"insert","lines":["",""]},{"start":{"row":14,"column":0},"end":{"row":14,"column":1},"action":"insert","lines":["/"]}],[{"start":{"row":14,"column":1},"end":{"row":14,"column":2},"action":"insert","lines":["/"],"id":650},{"start":{"row":14,"column":2},"end":{"row":14,"column":3},"action":"insert","lines":["s"]},{"start":{"row":14,"column":3},"end":{"row":14,"column":4},"action":"insert","lines":["c"]},{"start":{"row":14,"column":4},"end":{"row":14,"column":5},"action":"insert","lines":["r"]},{"start":{"row":14,"column":5},"end":{"row":14,"column":6},"action":"insert","lines":["i"]},{"start":{"row":14,"column":6},"end":{"row":14,"column":7},"action":"insert","lines":["p"]}],[{"start":{"row":14,"column":7},"end":{"row":14,"column":8},"action":"insert","lines":["t"],"id":651}],[{"start":{"row":14,"column":8},"end":{"row":15,"column":0},"action":"insert","lines":["",""],"id":652},{"start":{"row":15,"column":0},"end":{"row":15,"column":1},"action":"insert","lines":["r"]},{"start":{"row":15,"column":1},"end":{"row":15,"column":2},"action":"insert","lines":["o"]},{"start":{"row":15,"column":2},"end":{"row":15,"column":3},"action":"insert","lines":["u"]},{"start":{"row":15,"column":3},"end":{"row":15,"column":4},"action":"insert","lines":["t"]},{"start":{"row":15,"column":4},"end":{"row":15,"column":5},"action":"insert","lines":["e"]}],[{"start":{"row":15,"column":5},"end":{"row":15,"column":6},"action":"insert","lines":["r"],"id":653},{"start":{"row":15,"column":6},"end":{"row":15,"column":7},"action":"insert","lines":["."]}],[{"start":{"row":15,"column":7},"end":{"row":15,"column":12},"action":"insert","lines":["get()"],"id":654}],[{"start":{"row":15,"column":11},"end":{"row":15,"column":12},"action":"insert","lines":["2"],"id":655}],[{"start":{"row":15,"column":11},"end":{"row":15,"column":12},"action":"remove","lines":["2"],"id":656}],[{"start":{"row":15,"column":11},"end":{"row":15,"column":13},"action":"insert","lines":["''"],"id":657}],[{"start":{"row":15,"column":12},"end":{"row":15,"column":13},"action":"insert","lines":["/"],"id":658}],[{"start":{"row":15,"column":13},"end":{"row":15,"column":14},"action":"insert","lines":["s"],"id":659},{"start":{"row":15,"column":14},"end":{"row":15,"column":15},"action":"insert","lines":["c"]},{"start":{"row":15,"column":15},"end":{"row":15,"column":16},"action":"insert","lines":["r"]},{"start":{"row":15,"column":16},"end":{"row":15,"column":17},"action":"insert","lines":["i"]},{"start":{"row":15,"column":17},"end":{"row":15,"column":18},"action":"insert","lines":["p"]},{"start":{"row":15,"column":18},"end":{"row":15,"column":19},"action":"insert","lines":["t"]}],[{"start":{"row":15,"column":20},"end":{"row":15,"column":21},"action":"insert","lines":[","],"id":660}],[{"start":{"row":15,"column":21},"end":{"row":15,"column":22},"action":"insert","lines":[" "],"id":661}],[{"start":{"row":15,"column":22},"end":{"row":15,"column":24},"action":"insert","lines":["()"],"id":662}],[{"start":{"row":15,"column":23},"end":{"row":15,"column":24},"action":"insert","lines":["R"],"id":663},{"start":{"row":15,"column":24},"end":{"row":15,"column":25},"action":"insert","lines":["e"]},{"start":{"row":15,"column":25},"end":{"row":15,"column":26},"action":"insert","lines":["q"]},{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"insert","lines":[","]}],[{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"remove","lines":[","],"id":664},{"start":{"row":15,"column":25},"end":{"row":15,"column":26},"action":"remove","lines":["q"]},{"start":{"row":15,"column":24},"end":{"row":15,"column":25},"action":"remove","lines":["e"]},{"start":{"row":15,"column":23},"end":{"row":15,"column":24},"action":"remove","lines":["R"]}],[{"start":{"row":15,"column":23},"end":{"row":15,"column":24},"action":"insert","lines":["r"],"id":665},{"start":{"row":15,"column":24},"end":{"row":15,"column":25},"action":"insert","lines":["e"]},{"start":{"row":15,"column":25},"end":{"row":15,"column":26},"action":"insert","lines":["q"]},{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"insert","lines":[","]}],[{"start":{"row":15,"column":27},"end":{"row":15,"column":28},"action":"insert","lines":[" "],"id":666},{"start":{"row":15,"column":28},"end":{"row":15,"column":29},"action":"insert","lines":["r"]},{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"insert","lines":["e"]},{"start":{"row":15,"column":30},"end":{"row":15,"column":31},"action":"insert","lines":["s"]}],[{"start":{"row":15,"column":32},"end":{"row":15,"column":33},"action":"insert","lines":[" "],"id":667},{"start":{"row":15,"column":33},"end":{"row":15,"column":34},"action":"insert","lines":["="]},{"start":{"row":15,"column":34},"end":{"row":15,"column":35},"action":"insert","lines":[">"]}],[{"start":{"row":15,"column":35},"end":{"row":15,"column":36},"action":"insert","lines":[" "],"id":668},{"start":{"row":15,"column":36},"end":{"row":15,"column":37},"action":"insert","lines":["r"]},{"start":{"row":15,"column":37},"end":{"row":15,"column":38},"action":"insert","lines":["e"]},{"start":{"row":15,"column":38},"end":{"row":15,"column":39},"action":"insert","lines":["s"]},{"start":{"row":15,"column":39},"end":{"row":15,"column":40},"action":"insert","lines":["."]}],[{"start":{"row":15,"column":40},"end":{"row":15,"column":41},"action":"insert","lines":["s"],"id":669},{"start":{"row":15,"column":41},"end":{"row":15,"column":42},"action":"insert","lines":["e"]},{"start":{"row":15,"column":42},"end":{"row":15,"column":43},"action":"insert","lines":["n"]},{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"insert","lines":["d"]}],[{"start":{"row":15,"column":44},"end":{"row":15,"column":45},"action":"insert","lines":["e"],"id":670},{"start":{"row":15,"column":45},"end":{"row":15,"column":46},"action":"insert","lines":["r"]}],[{"start":{"row":15,"column":45},"end":{"row":15,"column":46},"action":"remove","lines":["r"],"id":671},{"start":{"row":15,"column":44},"end":{"row":15,"column":45},"action":"remove","lines":["e"]},{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"remove","lines":["d"]},{"start":{"row":15,"column":42},"end":{"row":15,"column":43},"action":"remove","lines":["n"]},{"start":{"row":15,"column":41},"end":{"row":15,"column":42},"action":"remove","lines":["e"]},{"start":{"row":15,"column":40},"end":{"row":15,"column":41},"action":"remove","lines":["s"]}],[{"start":{"row":15,"column":40},"end":{"row":15,"column":41},"action":"insert","lines":["r"],"id":672},{"start":{"row":15,"column":41},"end":{"row":15,"column":42},"action":"insert","lines":["e"]},{"start":{"row":15,"column":42},"end":{"row":15,"column":43},"action":"insert","lines":["n"]}],[{"start":{"row":15,"column":40},"end":{"row":15,"column":43},"action":"remove","lines":["ren"],"id":673},{"start":{"row":15,"column":40},"end":{"row":15,"column":46},"action":"insert","lines":["render"]}],[{"start":{"row":15,"column":46},"end":{"row":15,"column":48},"action":"insert","lines":["()"],"id":674}],[{"start":{"row":15,"column":47},"end":{"row":15,"column":49},"action":"insert","lines":["''"],"id":675}],[{"start":{"row":15,"column":48},"end":{"row":15,"column":49},"action":"insert","lines":["s"],"id":676},{"start":{"row":15,"column":49},"end":{"row":15,"column":50},"action":"insert","lines":["c"]},{"start":{"row":15,"column":50},"end":{"row":15,"column":51},"action":"insert","lines":["r"]},{"start":{"row":15,"column":51},"end":{"row":15,"column":52},"action":"insert","lines":["i"]}],[{"start":{"row":15,"column":48},"end":{"row":15,"column":52},"action":"remove","lines":["scri"],"id":677},{"start":{"row":15,"column":48},"end":{"row":15,"column":54},"action":"insert","lines":["script"]}],[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"insert","lines":[";"],"id":678}],[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"remove","lines":[";"],"id":679,"ignore":true}],[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"insert","lines":[";"],"id":680,"ignore":true}],[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"remove","lines":[";"],"id":681,"ignore":true}],[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"insert","lines":[";"],"id":682,"ignore":true}],[{"start":{"row":15,"column":58},"end":{"row":15,"column":61},"action":"insert","lines":["git"],"id":683,"ignore":true}],[{"start":{"row":15,"column":58},"end":{"row":15,"column":61},"action":"remove","lines":["git"],"id":684,"ignore":true}]]},"ace":{"folds":[],"scrolltop":1475,"scrollleft":0,"selection":{"start":{"row":15,"column":57},"end":{"row":15,"column":57},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":91,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1589017783401}